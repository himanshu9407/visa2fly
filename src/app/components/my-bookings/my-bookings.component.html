<div class="container historyContainer">
  <div class="row">
    <div class="col-lg-12">
      <div class="title-box">
        <h2>Order History ({{ totalItems }})</h2>
      </div>
    </div>
  </div>

  <div class="row summaryContainer">
    <div class="col-md-12">
      <h3 class="containerHeading">Search For Booking</h3>
    </div>
    <form [formGroup]="bookingSearchForm" style="width: 100%">
      <div class="col-md-12 mt-2 form-inline">
        <label for="" class="filterLabel">Search By</label>
        <label for="opt1" class="radio inputTop">
          <input
            (change)="clearFilters()"
            type="radio"
            name="searchBy"
            id="opt1"
            formControlName="searchBy"
            value="byDate"
            class="hidden"
          />
          <span class="filterLabel"></span>By Date Range
        </label>

        <label for="opt2" class="radio radio2 inputTop">
          <input
            (change)="clearFilters()"
            type="radio"
            name="searchBy"
            id="opt2"
            formControlName="searchBy"
            value="byBookingId"
            class="hidden"
          />
          <span class="filterLabel"></span>By Booking Id
        </label>
      </div>
      <div class="col-md-12 mt-2 inputTop" *ngIf="this.bookingSearchForm.get('searchBy').value === 'byDate'">
        <div class="form-row">
          <div class="col-md-12 col-lg-8">
            <div class="row">
              <div class="col-md-6 form-inline col-sm-6 inputTop inputpad10">
                <label for="dp" class="filterLabel">From Date</label>
                <div class="input-group">
                  <input (ngModelChange)="fromDateChanged()" formControlName="fromDate" class="form-control form-control-sm dateInput"
                    placeholder="yyyy-mm-dd"  name="dp" ngbDatepicker #d="ngbDatepicker" [maxDate]="maxDate"
                    (click)="d.toggle()" readonly="readonly"/>
                  <div class="input-group-append">
                    <button class="btn btn-sm btn-outline-secondary calendar" (click)="d.toggle()" type="button">
                      <svg
                        class="calendarSvg"
                        style="height: 18px; width: 18px"
                      >
                        <use
                          xlink:href="assets/sprites/sprite.svg#my_booking_calender"
                        ></use>
                      </svg>
                    </button>
                  </div>
                  <div class="invalid-feedback" *ngIf="errorDisplayedByMobile" style="display: block;">
                    <div *ngIf="(this.bookingSearchForm.get('fromDate').invalid && this.bookingSearchForm.get('fromDate').dirty)
                    || (this.bookingSearchForm.get('fromDate').pristine && fromDate)"> Please select the date
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 form-inline input100 col-sm-6 inputTop inputpad10">
                <label for="tp" class="filterLabel">To Date</label>
                <div class="input-group">
                  <input formControlName="toDate"
                  class="form-control form-control-sm dateInput" placeholder="yyyy-mm-dd" name="tp" ngbDatepicker #tp="ngbDatepicker"
                    [minDate]="minDateOfTo" [maxDate]="maxDate" (click)="tp.toggle()"/>
                  <div class="input-group-append">
                    <button class="btn btn-sm btn-outline-secondary calendar" (click)="tp.toggle()" type="button">
                      <svg
                        class="calendarSvg"
                        style="height: 18px; width: 18px"
                      >
                        <use
                          xlink:href="assets/sprites/sprite.svg#my_booking_calender"
                        ></use>
                      </svg>
                    </button>
                  </div>
                  <div class="invalid-feedback" *ngIf="errorDisplayedByMobile" style="display: block;">
                    <div *ngIf="(this.bookingSearchForm.get('toDate').invalid && this.bookingSearchForm.get('toDate').dirty)
                    || (this.bookingSearchForm.get('toDate').pristine && toDate)"> Please select the date
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="errorDisplayedByDeskstop">
              <div class="col-md-6 form-inline col-sm-6 input100 col-sm-6 inputTop inputpad10">
                <label for="" class="filterLabel"></label>
                  <div class="input-group">
                      <div class="invalid-feedback errorForDeskStop">
                        <div *ngIf="(this.bookingSearchForm.get('fromDate').invalid && this.bookingSearchForm.get('fromDate').dirty)
                          || (this.bookingSearchForm.get('fromDate').pristine && fromDate)"> Please select the date
                        </div>
                      </div>
                  </div>
              </div>
              <div class="col-md-6 form-inline">
                <div class="invalid-feedback errorToDateForDeskStop">
                  <div *ngIf="(this.bookingSearchForm.get('toDate').invalid && this.bookingSearchForm.get('toDate').dirty)
                        || (this.bookingSearchForm.get('toDate').pristine && toDate)"> Please select the date
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 col-lg-4 marginTop">
            <div class="row searchForDate">
              <div class="noPadd">
                <button
                  (click)="searchBookingsByDate()"
                  class="btn btn-sm roundedBorder"
                  type="submit">
                  Search
                </button>
              </div>
              <div class="borderLeft">
                <button
                (click)="filterByDate()"
                  class="btn btn-light btn-sm roundedBorder2"
                  type="button">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-filter">
                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3">
                    </polygon>
                  </svg>
                  Filter
                </button>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="col-md-12 mt-2 inputTop" *ngIf="this.bookingSearchForm.get('searchBy').value === 'byBookingId'">
        <div class="form-row">
          <div class="col-md-6 col-lg-4">
            <div class="row inputTop">
              <div class="col-md-12 form-inline inputpad10 bookingId_input_box">
                <label for="" class="mr-2 filterLabel">Booking Id </label>
                <div>
                  <input
                    formControlName="bookingId"
                    type="text"
                    class="form-control form-control-sm bookingId_input"
                    placeholder="Enter Booking Id"
                  />
                  <div
                    *ngIf="bookingIdInputError"
                    class="invalid-feedback"
                    style="display: block"
                  >
                    Enter a valid booking Id
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="col-md-6 col-lg-4 col-sm-12 col-12 bookMargin searchBooking"
          >
            <button
              (click)="searchBookingsByBookingId()"
              [disabled]="this.bookingSearchForm.get('bookingId').value == null"
              class="btn btn-sm btn-primary roundedBorder"
            >
              Search
            </button>
            <!-- <div class="row">

              <div class="col-6 noPadd text-center">
                <button (click)="clearFilters()" class="btn btn-sm showAll" *ngIf="this.isButtonVisible"
                  style="border-radius: 20px; padding: 5px 7px; background: #ffae42; font-weight: 600; color: #fff;">
                  View All
                </button>
              </div>
            </div> -->
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="modal fade show" id="filterModel" [ngStyle] ="{'display': display}" tabindex="-1" role="dialog"
data-backdrop="false" aria-labelledby="exampleModalLabel"
style="background-color: rgba(0, 0, 0, .7); overflow-y: scroll !important;"
aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">Filter By</h5>
      <button type="button" class="close" data-dismiss="modal" (click)="closeModel()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <form [formGroup]="bookingFilterForm">
      <div class="modal-body filterBody">
          <div class="col-12">
            <input class="form-check-input" type="checkbox" value="visa" formControlName="visa" id="visaCheckbox" checked>
            <label class="form-check-label" for="visaCheckbox">
              <span>Visa</span>
            </label>
            <!-- <input class="inp-cbx" id="datecbx1" formControlName="visa" type="checkbox" style="display: none;" />
            <label class="cbx" for="datecbx1">
              <span>
                <svg width="12px" height="10px" viewbox="0 0 12 10">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>Visa</span>
            </label> -->
          </div>
          <div class="col-12">
            <input class="form-check-input" type="checkbox" value="sim" formControlName="sim" id="simCheckbox" checked>
            <label class="form-check-label" for="simCheckbox">
              <span>Sim</span>
            </label>
            <!-- <input class="inp-cbx" id="datecbx2" formControlName="sim" type="checkbox" style="display: none;" />
            <label class="cbx" for="datecbx2">
              <span>
                <svg width="12px" height="10px" viewbox="0 0 12 10">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>Sim</span>
            </label> -->
          </div>
          <div class="col-12">
            <input class="form-check-input" type="checkbox" value="insurance" formControlName="insurance" id="insuranceCheckbox" checked>
            <label class="form-check-label" for="insuranceCheckbox">
              <span>Insurance</span>
            </label>
            <!-- <input class="inp-cbx" id="datecbx3" type="checkbox" formControlName="insurance" style="display: none;" />
            <label class="cbx" for="datecbx3">
              <span>
                <svg width="12px" height="10px" viewbox="0 0 12 10">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>Insurance</span>
            </label> -->
          </div>
      </div>
    </form>
    <div class="modal-footer filterFooter">
      <button type="button" class="btn btn-sm btn-primary filterButton"
         (click)="filterBookingFunction()">Apply Changes</button>
    </div>
  </div>
</div>
</div>

<div class="pcOnly">
  <div
    *ngIf="totalCount > 0"
    class="container myBooking"
    [@simpleFadeAnimation]="'in'"
  >
    <div class="row">
      <div
        *ngFor="
          let booking of bookingsForLoop
            | paginate
              : {
                  itemsPerPage: 6,
                  currentPage: currentPage1,
                  id: 'first',
                  totalItems: totalItems
                }
        "
        class="col-lg-4 col-md-6 col-sm-12 col-xs-12 mt-2"
      >
        <div
          [ngClass]="{
            visa: booking.booking.bookingType == 'Visa',
            'sim-card': booking.booking.bookingType == 'Sim',
            insurance: booking.booking.bookingType == 'Insurance'
          }"
        >
          <div class="card">
            <div class="card-header priceHeading text-white">
              {{ booking.booking.bookingType }}
            </div>
            <div class="card-body">
              <ul class="visa-type">
                <li>
                  Booking ID:
                  <span class="fieldData breakWord">{{
                    booking.booking.bookingId
                  }}</span>
                </li>
                <li>
                  Transaction ID :
                  <span
                    class="fieldData breakWord"
                    *ngIf="booking.booking.paymentId != null"
                    >{{ booking.booking.paymentId }}</span
                  >
                  <span
                    class="fieldData breakWord"
                    *ngIf="booking.booking.paymentId == null"
                    >NA</span
                  >
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Visa For :
                  <span class="fieldData">{{
                    booking.booking.visaForCountry
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Sim'">
                  Sim For :
                  <span class="fieldData">{{
                    booking.booking.visaForCountry
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Insurance For :
                  <span class="fieldData">{{
                    booking.insuranceBookings.country
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Visa Type:
                  <span class="fieldData">{{ booking.booking.visaType }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Sim'">
                  Sim Type:
                  <span class="fieldData">{{ booking.booking.visaType }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Plan Type:
                  <span class="fieldData">{{
                    booking.insuranceBookings.planType
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Policy Number:
                  <span
                    class="fieldData"
                    *ngIf="booking.insuranceBookings.policyNum != null"
                    >{{ booking.insuranceBookings.policyNum }}</span
                  >
                  <span
                    class="fieldData breakWord"
                    *ngIf="booking.insuranceBookings.policyNum == null"
                    >NA</span
                  >
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Coverage:
                  <span class="fieldData">{{
                    booking.insuranceBookings.currency +
                      " " +
                      booking.insuranceBookings.coverage
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Policy Commencement Date:
                  <span class="fieldData">{{
                    booking.insuranceBookings.policyCommencementDt
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Number Of Insured Person:
                  <span class="fieldData">{{
                    booking.insuranceBookings.numberOfInsuredPerson
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Entry Type:
                  <span class="fieldData">{{ booking.booking.entryType }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Total Travellers:
                  <span class="fieldData">{{
                    booking.booking.totalTravellers
                  }}</span>
                </li>
                <li>
                  Booking date:
                  <span class="fieldData">{{
                    booking.booking.bookingDate
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Document Collection Date:
                  <span class="fieldData">{{
                    booking.booking.documentCollectionDate
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Date of travel:
                  <span class="fieldData">{{
                    booking.booking.dateOfTravel
                  }}</span>
                </li>
                <li>
                  Booking Amount:
                  <span class="fieldData">{{
                    booking.booking.bookingAmount
                  }}</span>
                </li>
                <li>
                  Booking Status:
                  <!-- <span class="fieldData">123</span> -->
                  <span
                    [ngClass]="{
                      'badge-success': booking.booking.statusColor == 'g',
                      'badge-danger': booking.booking.statusColor == 'r',
                      'badge-warning': booking.booking.statusColor == 'y'
                    }"
                    class="fieldData badge"
                    >{{ booking.booking.bookingStatus }}</span
                  >
                </li>
                <li>
                  Payment status:
                  <span
                    class="fieldData badge"
                    [ngClass]="{
                      'badge-success': booking.booking.paymentColor == 'g',
                      'badge-danger': booking.booking.paymentColor == 'r',
                      'badge-warning': booking.booking.paymentColor == 'y'
                    }"
                    >{{ booking.booking.paymentStatus }}</span
                  >
                </li>
                <li
                  *ngIf="
                    booking.booking.bookingType == 'Visa' &&
                    booking.booking.bookingStatus == 'Visa application approved'
                  "
                >
                  Download E-visa:
                  <span
                    class="fieldData"
                    id="evisa_download"
                    (click)="
                      downloadEvisa(
                        booking.booking.bookingId,
                        booking.booking.bookingFrom
                      )
                    "
                    >Download
                    <svg style="height: 16px; width: 16px">
                      <use
                        xlink:href="assets/sprites/sprite.svg#download"
                      ></use>
                    </svg>
                  </span>
                </li>
              </ul>
            </div>
            <div class="card-footer">
              <div class="row">
                <div class="col-6 button">
                  <button
                    (click)="setActiveBooking(booking)"
                    type="button"
                    class="btn btn-outline-navy btn-sm"
                  >
                    View Details
                  </button>
                </div>

                <div class="col-6 button">
                  <button
                    *ngIf="booking.booking.bookingType == 'Visa'"
                    (click)="
                      downloadInvoice(
                        booking.booking.bookingId,
                        booking.booking.paymentColor
                      )
                    "
                    type="button"
                    class="btn btn-outline-success btn-sm"
                  >
                    Get Invoice
                  </button>
                  <button
                    *ngIf="booking.booking.bookingType == 'Sim'"
                    (click)="
                      downloadInvoice(
                        booking.booking.bookingId,
                        booking.booking.paymentColor
                      )
                    "
                    type="button"
                    class="btn btn-outline-success btn-sm"
                  >
                    Get Invoice
                  </button>
                  <button
                    *ngIf="booking.booking.bookingType == 'Insurance'"
                    (click)="
                      downloadPolicy(
                        booking.insuranceBookings.policyNum,
                        booking.booking.paymentColor,
                        booking.booking.bookingId
                      )
                    "
                    type="button"
                    class="btn btn-outline-success btn-sm"
                  >
                    Get Policy
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row" *ngIf="!filteredBookingsEmpty">
      <div class="col-12 mt-3">
        <pagination-controls
          (pageChange)="desktopBooking($event)"
          maxSize="6"
          id="first"
          class="my-pagination text-center"
          responsive="true"
          autoHide="true"
          previousLabel="Previous"
          nextLabel="Next"
          screenReaderPaginationLabel="Pagination"
          screenReaderPageLabel="page"
          screenReaderCurrentLabel="You're on page"
        >
        </pagination-controls>
      </div>
    </div>

    <div *ngIf="filteredBookingsEmpty">
      <div class="container">
        <div class="row">
          <div class="col-md-12 p-0 text-center emptyBanner">
            <img
              data-src="https://static.visa2fly.com/assets/emptycart.png"
              class="img-fluid lazyload"
              alt="empty cart image"
            />
          </div>
          <div class="col-md-12 text-center" style="vertical-align: middle; padding-bottom: 50px;">
            <button
              class="btn"
              (click)="seeBooking()"
              style="
                background: #000080;
                color: #fff;
                font-weight: 600;
                font-size: 16px;
              "
            >
              View All
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container" *ngIf="totalCount < 1">
    <div class="row">
      <div class="col-md-12 emptyBanner text-center">
        <img
          data-src="https://static.visa2fly.com/assets/emptycart.webp"
          class="lazyload img-fluid mt-3"
          alt="empty cart image"
        />
      </div>
      <!-- <div class="col-md-12 text-center" style="vertical-align: middle; margin-top: 10px;">
        <p style="color: gray; font-size: 14px; font-weight: 600;">No Booking Found</p>
       </div> -->
      <div class="col-md-12 text-center" style="vertical-align: middle; padding-bottom: 50px;">
        <button
          class="btn"
          (click)="seeBooking()"
          style="
            background: #000080;
            color: #fff;
            font-weight: 600;
            font-size: 16px;
          "
        >
          View All
        </button>
      </div>
    </div>
  </div>
</div>

<div class="mobileOnly">
  <div *ngIf="totalCount > 0" class="container myBooking">
    <div class="row mt-4">
      <div
        *ngFor="
          let booking of bookingsForLoop
            | paginate
              : {
                  itemsPerPage: 4,
                  currentPage: currentPage2,
                  id: 'second',
                  totalItems: totalItems
                }
        "
        class="col-lg-4 col-md-6 col-sm-12 col-xs-12 mt-2 bookingCard"
      >
        <div
          [ngClass]="{
            visa: booking.booking.bookingType == 'Visa',
            'sim-card': booking.booking.bookingType == 'Sim',
            insurance: booking.booking.bookingType == 'Insurance'
          }"
        >
          <div class="card">
            <div class="card-header priceHeading text-white">
              {{ booking.booking.bookingType }}
            </div>
            <div class="card-body">
              <!-- <h5 class="card-title">Special title treatment</h5>
                                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                                <a href="#" class="btn btn-primary">Go somewhere</a> -->
              <ul class="visa-type">
                <li>
                  Booking ID:
                  <span class="fieldData breakWord">{{
                    booking.booking.bookingId
                  }}</span>
                </li>
                <li>
                  Transaction ID :
                  <span
                    class="fieldData breakWord"
                    *ngIf="booking.booking.paymentId != null"
                    >{{ booking.booking.paymentId }}</span
                  >
                  <span
                    class="fieldData breakWord"
                    *ngIf="booking.booking.paymentId == null"
                    >NA</span
                  >
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Visa For :
                  <span class="fieldData">{{
                    booking.booking.visaForCountry
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Sim'">
                  Sim For :
                  <span class="fieldData">{{
                    booking.booking.visaForCountry
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Insurance For :
                  <span class="fieldData">{{
                    booking.insuranceBookings.country
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Visa Type:
                  <span class="fieldData">{{ booking.booking.visaType }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Sim'">
                  Sim Type:
                  <span class="fieldData">{{ booking.booking.visaType }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Plan Type:
                  <span class="fieldData">{{
                    booking.insuranceBookings.planType
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Policy Number:
                  <span
                    class="fieldData"
                    *ngIf="booking.insuranceBookings.policyNum != null"
                    >{{ booking.insuranceBookings.policyNum }}</span
                  >
                  <span
                    class="fieldData"
                    *ngIf="booking.insuranceBookings.policyNum == null"
                    >NA</span
                  >
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Coverage:
                  <span class="fieldData">{{
                    booking.insuranceBookings.currency +
                      " " +
                      booking.insuranceBookings.coverage
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Policy Commencement Date:
                  <span class="fieldData">{{
                    booking.insuranceBookings.policyCommencementDt
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Insurance'">
                  Number Of Insured Person:
                  <span class="fieldData">{{
                    booking.insuranceBookings.numberOfInsuredPerson
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Entry Type:
                  <span class="fieldData">{{ booking.booking.entryType }}</span>
                </li>
                <li>
                  Total Travellers:
                  <span class="fieldData">{{
                    booking.booking.totalTravellers
                  }}</span>
                </li>
                <li>
                  Booking date:
                  <span class="fieldData">{{
                    booking.booking.bookingDate
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Document Collection Date:
                  <span class="fieldData">{{
                    booking.booking.documentCollectionDate
                  }}</span>
                </li>
                <li *ngIf="booking.booking.bookingType == 'Visa'">
                  Date of travel:
                  <span class="fieldData">{{
                    booking.booking.dateOfTravel
                  }}</span>
                </li>
                <li>
                  Booking Status:
                  <!-- <span class="fieldData">123</span> -->
                  <span
                    [ngClass]="{
                      'badge-success': booking.booking.statusColor == 'g',
                      'badge-danger': booking.booking.statusColor == 'r',
                      'badge-warning': booking.booking.statusColor == 'y'
                    }"
                    class="fieldData badge"
                    >{{ booking.booking.bookingStatus }}</span
                  >
                </li>
                <li>
                  Payment status:
                  <!-- <span class="fieldData"></span> -->
                  <!-- <span class="fieldData badge badge-danger">Failed</span> -->
                  <span
                    class="fieldData badge"
                    [ngClass]="{
                      'badge-success': booking.booking.paymentColor == 'g',
                      'badge-danger': booking.booking.paymentColor == 'r',
                      'badge-warning': booking.booking.paymentColor == 'y'
                    }"
                    >{{ booking.booking.paymentStatus }}</span
                  >
                </li>
                <li
                  *ngIf="
                    booking.booking.bookingType == 'Visa' &&
                    booking.booking.bookingStatus == 'Visa application approved'
                  "
                >
                  Download E-visa:
                  <span
                    class="fieldData"
                    id="evisa_download"
                    (click)="
                      downloadEvisa(
                        booking.booking.bookingId,
                        booking.booking.bookingFrom
                      )
                    "
                    >Download
                    <svg style="height: 16px; width: 16px">
                      <use
                        xlink:href="assets/sprites/sprite.svg#download"
                      ></use>
                    </svg>
                  </span>
                </li>
              </ul>
            </div>
            <div class="card-footer">
              <div class="row">
                <div class="col-6 button">
                  <button
                    (click)="setActiveBooking(booking)"
                    type="button"
                    class="btn btn-outline-navy btn-sm"
                  >
                    View Details
                  </button>
                </div>

                <div class="col-6 button">
                  <button
                    *ngIf="booking.booking.bookingType == 'Visa'"
                    (click)="
                      downloadInvoice(
                        booking.booking.bookingId,
                        booking.booking.paymentColor
                      )
                    "
                    type="button"
                    class="btn btn-outline-success btn-sm"
                  >
                    Get Invoice
                  </button>
                  <button
                    *ngIf="booking.booking.bookingType == 'Sim'"
                    (click)="
                      downloadInvoice(
                        booking.booking.bookingId,
                        booking.booking.paymentColor
                      )
                    "
                    type="button"
                    class="btn btn-outline-success btn-sm"
                  >
                    Get Invoice
                  </button>
                  <button
                    *ngIf="booking.booking.bookingType == 'Insurance'"
                    (click)="
                      downloadPolicy(
                        booking.insuranceBookings.policyNum,
                        booking.booking.paymentColor,
                        booking.booking.bookingId
                      )
                    "
                    type="button"
                    class="btn btn-outline-success btn-sm"
                  >
                    Get Policy
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row" *ngIf="!filteredBookingsEmpty">
      <div class="col-12 mt-3">
        <pagination-controls
          (pageChange)="mobileBooking($event)"
          id="second"
          maxSize="3"
          class="my-pagination text-center"
          autoHide="true"
          responsive="true"
          previousLabel="Previous"
          nextLabel="Next"
          screenReaderPaginationLabel="Pagination"
          screenReaderPageLabel="page"
          screenReaderCurrentLabel="You're on page"
        >
        </pagination-controls>
      </div>
    </div>

    <div *ngIf="filteredBookingsEmpty">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center">
            <img
              data-src="https://static.visa2fly.com/assets/emptycart.webp"
              class="lazyload img-fluid"
              alt="empty cart image"
            />
          </div>
          <div class="col-md-12 text-center" style="vertical-align: middle">
            <button
              class="btn btn-sm"
              (click)="seeBooking()"
              style="
                background: #000080;
                color: #fff;
                font-weight: 600;
                font-size: 14px;
              "
            >
              View All
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    *ngIf="totalCount < 1"
    class="container d-flex justify-content-center"
    style="margin-top: 140px 0px 40px"
  >
    <div class="row">
      <div class="col-md-12">
        <div class="emptyBanner">
          <img
            data-src="https://static.visa2fly.com/assets/emptycart.png"
            class="lazyload img-fluid"
            alt="empty cart image"
          />
        </div>
      </div>
      <div class="col-md-12">
        <button
          class="btn btn-primary text-center mb-4 mt-2"
          [routerLink]="['/home']"
          style="width: 100%"
        >
          Shop Now
        </button>
      </div>
    </div>
  </div>
</div>

<div class="feedback-popup" id="myId">
  <!-- Modal -->

  <div
    class="modal fade show"
    tabindex="-1"
    role="dialog"
    data-backdrop="false"
    aria-hidden="true"
    [ngStyle]="{ display: bookingStatus ? 'block' : 'none' }"
    style="background-color: rgba(0, 0, 0, 0.7); overflow-y: scroll !important"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body" style="padding: 0px">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-6 wrap-left p-4">
                <div class="row">
                  <div class="cross-times checking" (click)="closeFeed()">
                    <button type="button">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="col-md-12">
                    <h4 class="feedHeading text-center text-uppercase">
                      Booking Details
                    </h4>
                  </div>
                  <div class="col-md-12">
                    <!-- <svg height="210" width="500">
                      <line
                        class="lineArrange"
                        x1="0"
                        y1="0"
                        x2="350"
                        y2="0"
                        style="stroke: rgb(0, 0, 0); stroke-width: 2"
                      />
                    </svg> -->
                  </div>
                  <div
                    class="col-md-12 detailsSetting"
                    *ngFor="let item of feedbackBookingDetail"
                  >
                    <ul class="listSet">
                      <li>
                        Booking Id:
                        <span class="fieldData">{{
                          item.booking.bookingId
                        }}</span>
                      </li>
                      <li>
                        Visa For:
                        <span class="fieldData">{{
                          item.booking.visaForCountry
                        }}</span>
                      </li>
                      <li>
                        Visa Type:
                        <span class="fieldData">{{
                          item.booking.visaType
                        }}</span>
                      </li>
                      <li>
                        Booking Date:
                        <span class="fieldData">{{
                          item.booking.bookingDate
                        }}</span>
                      </li>
                    </ul>
                  </div>

                  <div class="col-md-12">
                    <span>
                      <img
                        data-src="https://static.visa2fly.com/assets/feedback.png"
                        alt=""
                        class="img-fluid feedImage lazyload"
                      />
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-lg-6 wrap-right p-4">
                <div class="row">
                  <div class="cross-times" (click)="closeFeed()">
                    <button type="button">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="col-md-12">
                    <h4 class="feedHeading text-center text-uppercase">
                      Feedback Form
                    </h4>
                  </div>
                  <div class="col-md-12">
                    <p class="value text-capitalize">
                      Your feedback is valuable to us.
                    </p>
                  </div>
                  <!-- <div class="col-md-12 myFeedbackMsg" *ngIf="feedbackMsg">
                    <p style="font-size: 15px; margin-bottom: 0px; font-weight: 600;">Please Fill the Feedback Form.</p>
                  </div> -->
                  <div class="col-md-12 headingSet">
                    <h6>Please provide your feedback on following topics:</h6>
                  </div>
                </div>
                <form
                  class="form-row"
                  [formGroup]="feedbackForm"
                  (ngSubmit)="onSubmit()"
                >
                  <div class="col-md-12">
                    <p>
                      <svg style="height: 16px; width: 16px">
                        <use
                          xlink:href="assets/sprites/sprite.svg#hand_pointer"
                        ></use>
                      </svg>
                      How well does our product meet your needs ?
                    </p>
                    <div class="star-rating">
                      <input
                        type="radio"
                        id="f3-rating-star_5"
                        formControlName="f3-rating"
                        name="f3-rating"
                        value="5"
                      />
                      <label for="f3-rating-star_5" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f3-rating-star_4"
                        formControlName="f3-rating"
                        name="f3-rating"
                        value="4"
                      />
                      <label for="f3-rating-star_4" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f3-rating-star_3"
                        formControlName="f3-rating"
                        name="f3-rating"
                        value="3"
                      />
                      <label for="f3-rating-star_3" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f3-rating-star_2"
                        formControlName="f3-rating"
                        name="f3-rating"
                        value="2"
                      />
                      <label for="f3-rating-star_2" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f3-rating-star_1"
                        formControlName="f3-rating"
                        name="f3-rating"
                        value="1"
                      />
                      <label for="f3-rating-star_1" class="star">&#9733;</label>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <p>
                      <svg style="height: 16px; width: 16px">
                        <use
                          xlink:href="assets/sprites/sprite.svg#hand_pointer"
                        ></use>
                      </svg>
                      Were you able to find the information you were looking for
                      on our website ?
                    </p>
                    <div class="star-rating">
                      <input
                        type="radio"
                        id="f1-rating-star_5"
                        formControlName="f1-rating"
                        name="f1-rating"
                        value="5"
                      />
                      <label for="f1-rating-star_5" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f1-rating-star_4"
                        formControlName="f1-rating"
                        name="f1-rating"
                        value="4"
                      />
                      <label for="f1-rating-star_4" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f1-rating-star_3"
                        formControlName="f1-rating"
                        name="f1-rating"
                        value="3"
                      />
                      <label for="f1-rating-star_3" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f1-rating-star_2"
                        formControlName="f1-rating"
                        name="f1-rating"
                        value="2"
                      />
                      <label for="f1-rating-star_2" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f1-rating-star_1"
                        formControlName="f1-rating"
                        name="f1-rating"
                        value="1"
                      />
                      <label for="f1-rating-star_1" class="star">&#9733;</label>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <p>
                      <svg style="height: 16px; width: 16px">
                        <use
                          xlink:href="assets/sprites/sprite.svg#hand_pointer"
                        ></use>
                      </svg>
                      How likely are you to recommend visa2fly to a friends or
                      family ?
                    </p>
                    <div class="star-rating">
                      <input
                        type="radio"
                        id="f2-rating-star_5"
                        formControlName="f2-rating"
                        name="f2-rating"
                        value="5"
                      />
                      <label for="f2-rating-star_5" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f2-rating-star_4"
                        formControlName="f2-rating"
                        name="f2-rating"
                        value="4"
                      />
                      <label for="f2-rating-star_4" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f2-rating-star_3"
                        formControlName="f2-rating"
                        name="f2-rating"
                        value="3"
                      />
                      <label for="f2-rating-star_3" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f2-rating-star_2"
                        formControlName="f2-rating"
                        name="f2-rating"
                        value="2"
                      />
                      <label for="f2-rating-star_2" class="star">&#9733;</label>
                      <input
                        type="radio"
                        id="f2-rating-star_1"
                        formControlName="f2-rating"
                        name="f2-rating"
                        value="1"
                      />
                      <label for="f2-rating-star_1" class="star">&#9733;</label>
                    </div>
                  </div>
                  <div class="col-md-12 textField">
                    <h6>
                      If you could change just one thing about our product, what
                      would it be ?
                    </h6>
                  </div>
                  <div class="col-md-12">
                    <textarea
                      class="form-control"
                      formControlName="FeedbackEdit"
                      id=""
                      cols="30"
                      rows="4"
                    ></textarea>
                  </div>
                  <div class="col-md-12 text-center mt-2">
                    <button
                      type="button"
                      class="btn text-white btn-submit btn-sm btn-block"
                      (click)="onSubmit()"
                    >
                      Submit
                    </button>
                  </div>
                  <div class="col-md-12 text-center mt-2">
                    <button
                      type="button"
                      class="btn btn btn-outline-info btn-sm btn-block"
                      (click)="closeFeed()"
                    >
                      No, I'm not interested
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
